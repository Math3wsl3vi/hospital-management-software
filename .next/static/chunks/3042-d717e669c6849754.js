"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3042],{4996:function(e,s,t){t.d(s,{Z:function(){return components_History}});var n=t(7437),a=t(2265),r=t(2031),i=t(6790),l=t(1465),o=t(3261),d=t(4086);let fetchMedicationsGroupedByVisitId=async e=>{try{console.log("Fetching medications for email: ".concat(e));let s=e.replace(/[@.]/g,"_"),t=(0,d.hJ)(o.db,"patient-medication",s,"visits"),n=await (0,d.PL)(t);if(console.log("Found ".concat(n.docs.length," visits")),n.empty)return console.warn("No visits found."),{};let a={};for(let e of n.docs){let s=e.id;console.log("Processing visit ID: ".concat(s));let t=(0,d.hJ)(e.ref,"medications"),n=await (0,d.PL)(t);console.log("Found ".concat(n.docs.length," items for visit ").concat(s)),n.empty?console.warn("No medications found for visit ID ".concat(s)):a[s]=n.docs.map(e=>{var s;let t=e.data();console.log("Fetched item data:",t);let n=(null===(s=t.date)||void 0===s?void 0:s.toDate)?t.date.toDate().toLocaleDateString("en-GB"):"Unknown";return{id:e.id,name:t.name||"Unknown",dosage:t.dosage||"N/A",amount:t.amount||0,frequency:t.frequency||"N/A",duration:t.duration||"N/A",quantity:t.quantity||"N/A",date:n}})}return console.log("Final grouped medications:",a),a}catch(e){return console.error("Error fetching medications:",e),{}}};var components_History=()=>{let e=(0,i.L)(e=>e.selectedUser),[s,t]=(0,a.useState)({}),[o,d]=(0,a.useState)(!1),fetchMedications=async()=>{if(null==e?void 0:e.email){d(!0);try{let s=await fetchMedicationsGroupedByVisitId(e.email);t(s)}catch(e){console.error("Error fetching medications:",e)}d(!1)}};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"grid grid-cols-3 mb-5",children:[(0,n.jsxs)(r.Vq,{children:[(0,n.jsxs)(r.hg,{className:"border p-2 text-center active:bg-green-1 active:text-white cursor-pointer hover:text-white hover:bg-green-1",children:["Patient's"," Records"]}),(0,n.jsx)(r.cZ,{children:(0,n.jsxs)(r.fK,{children:[(0,n.jsx)(r.$N,{className:"capitalize",children:"Medical Records"}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 mt-10",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(l._,{children:["Patient's"," Name"]}),(0,n.jsx)("h1",{className:"p-1 border border-gray-300 rounded-md",children:null==e?void 0:e.name})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(l._,{children:["Patient's"," National Id"]}),(0,n.jsx)("h1",{className:"p-1 border border-gray-300 rounded-md",children:null==e?void 0:e.id})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(l._,{children:["Patient's"," Date Of Birth"]}),(0,n.jsx)("h1",{className:"p-1 border border-gray-300 rounded-md",children:null==e?void 0:e.dob})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(l._,{children:["Patient's"," Gender"]}),(0,n.jsx)("h1",{className:"p-1 border border-gray-300 rounded-md",children:null==e?void 0:e.sex})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(l._,{children:["Patient's"," Insurance Provider"]}),(0,n.jsx)("h1",{className:"p-1 border border-gray-300 rounded-md",children:(null==e?void 0:e.insuranceProvider)||"N/A"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(l._,{children:["Patient's"," Insurance Policy Number"]}),(0,n.jsx)("h1",{className:"p-1 border border-gray-300 rounded-md",children:(null==e?void 0:e.insurancePolicyNumber)||"N/A"})]})]})]})})]}),(0,n.jsxs)(r.Vq,{children:[(0,n.jsx)(r.hg,{className:"border p-2 text-center active:bg-green-1 active:text-white cursor-pointer hover:text-white hover:bg-green-1",children:"Appointments"}),(0,n.jsx)(r.cZ,{children:(0,n.jsxs)(r.fK,{children:[(0,n.jsx)(r.$N,{children:"NOTICE!"}),(0,n.jsx)(r.Be,{children:"Appointments not available at the moment."})]})})]}),(0,n.jsxs)(r.Vq,{children:[(0,n.jsx)(r.hg,{className:"border p-2 text-center active:bg-green-1 active:text-white cursor-pointer hover:text-white hover:bg-green-1",onClick:fetchMedications,children:"Medication History"}),(0,n.jsx)(r.cZ,{children:(0,n.jsxs)(r.fK,{children:[(0,n.jsx)(r.$N,{children:"Medication History"}),o?(0,n.jsx)("p",{children:"Loading medications..."}):Object.keys(s).length>0?Object.entries(s).map(e=>{let[s,t]=e;return(0,n.jsx)("div",{className:"mt-4 border p-3 rounded-lg shadow-sm",children:(0,n.jsx)("ul",{className:"mt-2",children:t.map(e=>(0,n.jsxs)("li",{className:"p-2 border-b",children:[(0,n.jsx)("strong",{children:e.name})," - ",e.dosage,", ",e.frequency,", ",e.duration]},e.id))})},s)}):(0,n.jsx)("p",{children:"No medication history found."})]})})]})]})})}},7236:function(e,s,t){var n=t(7437);t(2265),s.Z=e=>{let{selectedUser:s}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-5 w-full",children:[(0,n.jsxs)("div",{className:"flex gap-10 w-full",children:[(0,n.jsxs)("div",{className:"gap-2 flex flex-col w-1/2",children:[(0,n.jsx)("label",{htmlFor:"service",children:"Full Names"}),(0,n.jsx)("div",{className:"focus-visible:ring-0 focus-visible:ring-offset-0 border p-2 rounded-md",children:(null==s?void 0:s.name)||"N/A"})]}),(0,n.jsxs)("div",{className:"gap-2 flex flex-col w-1/2",children:[(0,n.jsx)("label",{htmlFor:"service",children:"National ID Number"}),(0,n.jsx)("div",{className:"focus-visible:ring-0 focus-visible:ring-offset-0 border p-2 rounded-md",children:(null==s?void 0:s.id)||"N/A"})]}),(0,n.jsxs)("div",{className:"gap-2 flex flex-col w-1/2",children:[(0,n.jsx)("label",{htmlFor:"service",children:"Blood Group"}),(0,n.jsx)("div",{className:"focus-visible:ring-0 focus-visible:ring-offset-0 border p-2 rounded-md",children:(null==s?void 0:s.bloodGroup)||"N/A"})]})]}),(0,n.jsxs)("div",{className:"flex gap-10 w-full",children:[(0,n.jsxs)("div",{className:"gap-2 flex flex-col w-1/2",children:[(0,n.jsx)("label",{htmlFor:"service",children:"Phone Number"}),(0,n.jsx)("div",{className:"focus-visible:ring-0 focus-visible:ring-offset-0 border p-2 rounded-md",children:(null==s?void 0:s.phone)||"N/A"})]}),(0,n.jsxs)("div",{className:"gap-2 flex flex-col w-1/2",children:[(0,n.jsx)("label",{htmlFor:"service",children:"Sex"}),(0,n.jsx)("div",{className:"focus-visible:ring-0 focus-visible:ring-offset-0 border p-2 rounded-md",children:(null==s?void 0:s.sex)||"N/A"})]}),(0,n.jsxs)("div",{className:"gap-2 flex flex-col w-1/2",children:[(0,n.jsx)("label",{htmlFor:"service",children:"Email"}),(0,n.jsx)("div",{className:"focus-visible:ring-0 focus-visible:ring-offset-0 border p-2 rounded-md",children:(null==s?void 0:s.email)||"N/A"})]})]})]})}},2031:function(e,s,t){t.d(s,{$N:function(){return h},Be:function(){return x},GG:function(){return u},Vq:function(){return o},cZ:function(){return f},fK:function(){return DialogHeader},hg:function(){return d}});var n=t(7437),a=t(2265),r=t(8712),i=t(571),l=t(1628);let o=r.fC,d=r.xz,c=r.h_,u=r.x8,m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)(r.aV,{ref:s,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a})});m.displayName=r.aV.displayName;let f=a.forwardRef((e,s)=>{let{className:t,children:a,...o}=e;return(0,n.jsxs)(c,{children:[(0,n.jsx)(m,{}),(0,n.jsxs)(r.VY,{ref:s,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[a,(0,n.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(i.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=r.VY.displayName;let DialogHeader=e=>{let{className:s,...t}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};DialogHeader.displayName="DialogHeader";let h=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)(r.Dx,{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...a})});h.displayName=r.Dx.displayName;let x=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)(r.dk,{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...a})});x.displayName=r.dk.displayName},1465:function(e,s,t){t.d(s,{_:function(){return d}});var n=t(7437),a=t(2265),r=t(6743),i=t(6061),l=t(1628);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,n.jsx)(r.f,{ref:s,className:(0,l.cn)(o(),t),...a})});d.displayName=r.f.displayName},3261:function(e,s,t){t.d(s,{db:function(){return o}});var n=t(994),a=t(4086),r=t(2601);let i={apiKey:"AIzaSyDIZQy5i3zC0WavjxkAMHKmku0aCMrKoe4",authDomain:"hospital-management-53831.firebaseapp.com",projectId:"hospital-management-53831",storageBucket:"hospital-management-53831.firebasestorage.app",messagingSenderId:"705193792980",appId:"1:705193792980:web:019035ff9af8a7139ab241",measurementId:r.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},l=(0,n.ZF)(i),o=(0,a.ad)(l)},1628:function(e,s,t){t.d(s,{cn:function(){return cn}});var n=t(7042),a=t(4769);function cn(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,n.W)(s))}},6790:function(e,s,t){t.d(s,{L:function(){return r}});var n=t(9115),a=t(4810);let r=(0,n.U)()((0,a.tJ)(e=>({selectedUser:null,setSelectedUser:s=>e({selectedUser:s})}),{name:"user-storage"}))},5846:function(e,s,t){t.d(s,{B:function(){return r}});var n=t(9115),a=t(4810);let r=(0,n.U)()((0,a.tJ)(e=>({vitals:{weight:"",temp:"",bpm:"",heart:"",rate:"",height:""},setVitals:s=>e({vitals:s})}),{name:"vitals-storage"}))}}]);