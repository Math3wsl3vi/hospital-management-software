(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9496],{6247:function(e,t,a){Promise.resolve().then(a.bind(a,7030))},7030:function(e,t,a){"use strict";a.r(t);var s=a(7437),n=a(3611),r=a(4033),i=a(2265),o=a(2031),d=a(5831),l=a(6790),c=a(4086),u=a(446),f=a(3261);t.default=()=>{let[e,t]=(0,i.useState)(""),[a,m]=(0,i.useState)(!1),[p,h]=(0,i.useState)([]),[x,g]=(0,i.useState)(null),{selectedUser:b,setSelectedUser:N}=(0,l.L)(),[v,j]=(0,i.useState)([]),y=(0,r.useRouter)(),{toast:w}=(0,u.pm)();(0,i.useEffect)(()=>{let fetchPatients=async()=>{try{let e=await (0,c.PL)((0,c.hJ)(f.db,"patients")),t=e.docs.map(e=>({id:e.id,nationalId:e.data().nationalId||"",firstName:e.data().firstName||"",lastName:e.data().lastName||"",dateOfBirth:e.data().dateOfBirth||"",gender:e.data().gender||"",bloodGroup:e.data().bloodGroup||"",phoneNumber:e.data().phoneNumber||"",name:"".concat(e.data().firstName," ").concat(e.data().lastName)||"",phone:e.data().phoneNumber||"",sex:e.data().gender||"",dob:e.data().dateOfBirth||"",email:e.data().email||"",insuranceProvider:e.data().insuranceProvider||"",insurancePolicyNumber:e.data().insurancePolicyNumber||""}));j(t)}catch(e){console.error("Error fetching patients:",e),w({description:"Error fetching patients"})}};fetchPatients()},[w]);let handleSelect=e=>{t("".concat(e.firstName," ").concat(e.lastName)),N({...e,id:Number(e.nationalId),name:"".concat(e.firstName," ").concat(e.lastName),phone:e.phoneNumber,sex:e.gender,dob:e.dateOfBirth,email:e.email,insuranceProvider:e.insuranceProvider,insurancePolicyNumber:e.insurancePolicyNumber}),h([])};return(0,s.jsx)("div",{className:"h-screen w-full font-poppins flex justify-center p-2 overflow-scroll",children:(0,s.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,s.jsx)("h1",{className:"text-3xl text-center",children:"Welcome to the Hospital"}),(0,s.jsxs)("p",{className:"text-center text-gray-400 mt-3",children:["Enter the ","patient's"," Service Id/Name"]}),(0,s.jsxs)("div",{className:"mt-10 flex justify-center items-center gap-10 flex-col",children:[(0,s.jsx)(d.I,{placeholder:"Enter Id Number",value:e,onChange:e=>{let a=e.target.value.trim().toLowerCase();if(t(a),!a){h([]);return}let s=v.filter(e=>"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(a)||e.nationalId.includes(a));h(s)},className:"font-poppins text-3xl focus-visible:ring-0 focus-visible:ring-offset-0 p-2 capitalize"}),p.length>0&&(0,s.jsx)("div",{className:"w-full md:w-3/4 bg-white border rounded-md overflow-y-auto",children:p.map(e=>(0,s.jsxs)("div",{onClick:()=>handleSelect(e),className:"p-2 cursor-pointer flex flex-row gap-2 items-center justify-between",children:[(0,s.jsx)("p",{children:e.firstName}),(0,s.jsx)("p",{children:e.nationalId})]},e.id))}),(0,s.jsxs)("div",{className:"w-full flex flex-col gap-5 items-center",children:[(0,s.jsx)("h1",{children:"New Patient Registration"}),(0,s.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,s.jsx)(n.z,{onClick:()=>y.push("patient-registration"),className:"bg-green-1 w-1/2",children:"Register"})})]}),(0,s.jsx)("h1",{className:"text-lg font-semibold hidden",children:"Select Payment Method"}),(0,s.jsxs)("div",{className:"flex-row gap-2 hidden",children:[(0,s.jsx)("button",{className:"p-3 border rounded-md w-full ".concat("Insurance"===x?"bg-green-1 text-white":"bg-gray-100"),onClick:()=>g("Insurance"),children:"Insurance"}),(0,s.jsx)("button",{className:"p-3 border rounded-md w-full ".concat("M-Pesa"===x?"bg-green-1  text-white":"bg-gray-100"),onClick:()=>g("M-Pesa"),children:"M-Pesa"}),(0,s.jsx)("button",{className:"p-3 border rounded-md w-full ".concat("Card"===x?"bg-green-1 text-white":"bg-gray-100"),onClick:()=>g("Card"),children:"Card Payment"})]}),(0,s.jsx)(n.z,{onClick:()=>{if(!b){alert("Please select a patient before continuing.");return}m(!0)},className:"w-1/2 bg-green-1",children:"Continue"})]}),(0,s.jsx)(o.Vq,{open:a,onOpenChange:m,children:(0,s.jsxs)(o.cZ,{className:"font-poppins",children:[(0,s.jsxs)("h1",{className:"font-poppins text-center mb-5 text-lg",children:["Welcome to Lanet Regional Hospital"," ",(0,s.jsx)("span",{className:"font-semibold capitalize",children:null==b?void 0:b.name})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"gap-2 flex flex-col",children:[(0,s.jsx)("label",{children:"Email"}),(0,s.jsx)("div",{className:"border p-2 rounded-md",children:null==b?void 0:b.email})]}),(0,s.jsxs)("div",{className:"gap-2 flex flex-col",children:[(0,s.jsx)("label",{children:"National Id Number"}),(0,s.jsx)("div",{className:"border p-2 rounded-md",children:null==b?void 0:b.id})]}),(0,s.jsxs)("div",{className:"flex flex-row gap-3 w-full",children:[(0,s.jsxs)("div",{className:"gap-2 flex flex-col w-1/2",children:[(0,s.jsx)("label",{children:"Sex"}),(0,s.jsx)("div",{className:"border p-2 rounded-md",children:null==b?void 0:b.sex})]}),(0,s.jsxs)("div",{className:"gap-2 flex flex-col w-1/2",children:[(0,s.jsx)("label",{children:"Date of Birth"}),(0,s.jsx)("div",{className:"border p-2 rounded-md",children:null==b?void 0:b.dob})]})]})]}),(0,s.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,s.jsx)(n.z,{onClick:()=>y.push("/triage?user=".concat(encodeURIComponent(JSON.stringify(b)),"&payment=").concat(encodeURIComponent(x))),className:"bg-green-1",children:"Continue to Triage"})})]})})]})})}},3611:function(e,t,a){"use strict";a.d(t,{z:function(){return l}});var s=a(7437),n=a(2265),r=a(7256),i=a(6061),o=a(1628);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:l=!1,...c}=e,u=l?r.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(d({variant:n,size:i,className:a})),ref:t,...c})});l.displayName="Button"},2031:function(e,t,a){"use strict";a.d(t,{$N:function(){return p},Be:function(){return h},GG:function(){return u},Vq:function(){return d},cZ:function(){return m},fK:function(){return DialogHeader},hg:function(){return l}});var s=a(7437),n=a(2265),r=a(8712),i=a(571),o=a(1628);let d=r.fC,l=r.xz,c=r.h_,u=r.x8,f=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});f.displayName=r.aV.displayName;let m=n.forwardRef((e,t)=>{let{className:a,children:n,...d}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(f,{}),(0,s.jsxs)(r.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[n,(0,s.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=r.VY.displayName;let DialogHeader=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};DialogHeader.displayName="DialogHeader";let p=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});p.displayName=r.Dx.displayName;let h=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...n})});h.displayName=r.dk.displayName},5831:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var s=a(7437),n=a(2265),r=a(1628);let i=n.forwardRef((e,t)=>{let{className:a,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},3261:function(e,t,a){"use strict";a.d(t,{db:function(){return d}});var s=a(994),n=a(4086),r=a(2601);let i={apiKey:"AIzaSyDIZQy5i3zC0WavjxkAMHKmku0aCMrKoe4",authDomain:"hospital-management-53831.firebaseapp.com",projectId:"hospital-management-53831",storageBucket:"hospital-management-53831.firebasestorage.app",messagingSenderId:"705193792980",appId:"1:705193792980:web:019035ff9af8a7139ab241",measurementId:r.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},o=(0,s.ZF)(i),d=(0,n.ad)(o)},446:function(e,t,a){"use strict";a.d(t,{pm:function(){return useToast}});var s=a(2265);let n=0;function genId(){return(n=(n+1)%Number.MAX_SAFE_INTEGER).toString()}let r=new Map,addToRemoveQueue=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),dispatch({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},reducer=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?addToRemoveQueue(a):e.toasts.forEach(e=>{addToRemoveQueue(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],o={toasts:[]};function dispatch(e){o=reducer(o,e),i.forEach(e=>{e(o)})}function toast(e){let{...t}=e,a=genId(),dismiss=()=>dispatch({type:"DISMISS_TOAST",toastId:a});return dispatch({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||dismiss()}}}),{id:a,dismiss,update:e=>dispatch({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function useToast(){let[e,t]=s.useState(o);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast,dismiss:e=>dispatch({type:"DISMISS_TOAST",toastId:e})}}},1628:function(e,t,a){"use strict";a.d(t,{cn:function(){return cn}});var s=a(7042),n=a(4769);function cn(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,s.W)(t))}},6790:function(e,t,a){"use strict";a.d(t,{L:function(){return r}});var s=a(9115),n=a(4810);let r=(0,s.U)()((0,n.tJ)(e=>({selectedUser:null,setSelectedUser:t=>e({selectedUser:t})}),{name:"user-storage"}))}},function(e){e.O(0,[4358,7895,5139,8094,9401,7786,2971,2472,1744],function(){return e(e.s=6247)}),_N_E=e.O()}]);